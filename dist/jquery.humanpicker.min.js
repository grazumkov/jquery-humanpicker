!function e(t,i,a){function n(d,s){if(!i[d]){if(!t[d]){var o="function"==typeof require&&require;if(!s&&o)return o(d,!0);if(l)return l(d,!0);var r=new Error("Cannot find module '"+d+"'");throw r.code="MODULE_NOT_FOUND",r}var u=i[d]={exports:{}};t[d][0].call(u.exports,function(e){var i=t[d][1][e];return n(i?i:e)},u,u.exports,e,t,i,a)}return i[d].exports}for(var l="function"==typeof require&&require,d=0;d<a.length;d++)n(a[d]);return n}({1:[function(e,t){(function(e){(function(e,t,i,a,n){function l(e,t){return e.replace(/\{([\w\.]*)\}/g,function(e,i){for(var a=i.split("."),n=t[a.shift()],l=0,d=a.length;d>l;l++)n=n[a[l]];return"undefined"!=typeof n&&null!==n?n:""})}n("undefined"!=typeof l?l:window.nano)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e){!function(t,i,a){"use strict";function n(e){return this.each(function(){var i=t(this),a=i.data("xt.HumanPicker"),n="object"==typeof e&&e;a||i.data("xt.HumanPicker",a=new l(this,n)),"string"==typeof e&&a[e]()})}var l,d=e("nano");l=function(e,i){this.options=t.extend({},l.DEFAULTS,i),this.$element=t(e),this.$bodyListContainer=this._renderTpl(l.Tpl.BodyListContainer,{id:this.$element.prop("id")+"_HumanPickerListContainer"}),this.$ageListWrap=this._renderTpl(l.Tpl.AgeListWrap),this.$ageListWrap.appendTo(this.$bodyListContainer),this.$bodyListContainer.appendTo(a.body),this._render(),this._bindEvents()},l.prototype._getI18n=function(e){return l.i18n[this.options.lang][e]},l.prototype.destroy=function(){this.$element.empty(),this.$bodyListContainer.empty(),this.$bodyListContainer.remove()},l.prototype._renderTpl=function(e,i){return t(d(e,i))},l.prototype._render=function(){var e,t=this,i=this._renderTpl(l.Tpl.Wrap),a=this.options,n=a.initialValue,d=n.kidsAges&&n.kidsAges instanceof Array?n.kidsAges:[];for(this.$element.empty(),e=0;e<a.adultsCount;e++)t._renderTpl(l.Tpl.AdultItem).addClass(e<n.adults?l.CLASS.classItemSelected:"").appendTo(i);for(t._renderTpl(l.Tpl.HiddenInput,{role:"adults",name:a.adultsParamName,value:n.adults}).appendTo(i),t._renderTpl(l.Tpl.HiddenInput,{role:"kids",name:a.kidsParamName,value:n.kids}).appendTo(i),e=0;e<a.adultsCount;e++)t._renderTpl(l.Tpl.KidItem,{age:d[e]||0}).append(t._renderTpl(l.Tpl.HiddenInput,{role:"kid-age",name:a.kidsAgesParamName,value:d[e]||0}).prop("disabled",e>=n.kids)).addClass(e<n.kids?l.CLASS.classItemSelected:"").appendTo(i);a.kidAgeItems.length>0&&t._renderKidAgeList(),t.$element.append(i),t._updateTooltips()},l.prototype._renderKidAgeList=function(){var e,t,i,a,n=this,d=this.options,s=d.kidAgeItemsGroupMax||1,o=Math.max(((d.kidAgeItems.length||1)/s).toFixed()-0,1);for(this.$ageListWrap.empty(),t=0;o>t;t++){for(e=n._renderTpl(l.Tpl.AgeList),a=Math.min(t*s+s,d.kidAgeItems.length),i=t*s;a>i;i++)n._renderTpl(l.Tpl.AgeListItem,d.kidAgeItems[i]).appendTo(e);e.appendTo(this.$ageListWrap)}},l.prototype.value=function(e){return e&&"object"==typeof e?void this._setValue(e):this._getValue()},l.prototype._setValue=function(){},l.prototype._getValue=function(){var e={},i=this.$element.find('input[data-role="adults"]'),a=this.$element.find('input[data-role="kids"]'),n=this.$element.find("."+l.CLASS.classItemSelected+' input[data-role="kid-age"]');return e.adults=i.val(),e.kids=a.val(),e.kidsAges=e.kidsAges||[],n.length&&(e.kidsAges=t.map(n,function(e){return e.value-0})),e},l.prototype._updateTooltips=function(){var e=this,i=e.$element;i.find("."+l.CLASS.classItem).each(function(i,a){var n=t(a),d=n.hasClass(l.CLASS.classItemSelected)?"tooltipItemSelected":"tooltipItem";t(n).attr("title",e._getI18n(d))}),i.find(".kid-age-caption").each(function(i,a){var n=t(a);n.closest("."+l.CLASS.classItem).hasClass(l.CLASS.classItemSelected)?n.attr("title",e._getI18n("tooltipEditAge")):n.removeAttr("title")})},l.prototype._bindEvents=function(){var e=this,n=function(){e.$element.find('input[data-role="kids"]').val(e.$element.find('[data-role="kid-item"].'+l.CLASS.classItemSelected).length)};e.$element.find("[data-role='adult-item']").on("click",function(){var i=e.$element.find('input[data-role="adults"]');t(this).toggleClass(l.CLASS.classItemSelected),i.val(e.$element.find('[data-role="adult-item"].'+l.CLASS.classItemSelected).length),e._updateTooltips()}),e.$element.find("[data-role='kid-item']").on("click",function(){{var i=t(this);i.find('input[data-role="kid-age"]').val()||0}e._kidAgePickerClose(),i.hasClass(l.CLASS.classItemSelected)?(i.removeClass(l.CLASS.classItemSelected),i.find(".kid-age-caption").text(0),i.find('input[data-role="kid-age"]').prop("disabled",!0).val(0),n(),e._updateTooltips()):i.find(".kid-age-caption").trigger("click")}),e.$element.find(".kid-age-caption").on("click",function(i){i.stopPropagation();var a=t(this),d=a.closest("[data-role='kid-item']"),s=d.find('input[data-role="kid-age"]').val()||0;e._kidAgePickerShow(d,s,function(t){a.text(t.text.replace(/ /g,"")),d.addClass(l.CLASS.classItemSelected),d.find('input[data-role="kid-age"]').prop("disabled",!1).val(t.value),n(),e._updateTooltips()})}),t(a).off("click.humanpicker.document").on("click.humanpicker.document",function(i){return t(i.target).closest('[data-role="kid-age-list"]').length||t(i.target).closest('[data-role="kid-item"]').length?void i.preventDefault():void e._kidAgePickerClose()}),t(i).off("resize.humanpicker.window").on("resize.humanpicker.window",function(){e._kidAgePickerClose()})},l.prototype._kidAgePickerClose=function(){var e=this.$ageListWrap;e.hide()},l.prototype._kidAgePickerShow=function(e,i,a){var n="click.humanpicker",d=this.$ageListWrap;d.css("left",t(e).offset().left),d.css("top",t(e).offset().top+t(e).outerHeight()+2),d.find('[data-role="kid-age-item"]').removeClass(l.CLASS.classKidAgeSelected),d.find('[data-role="kid-age-item"][data-value="'+i+'"]').addClass(l.CLASS.classKidAgeSelected),d.find('[data-role="kid-age-item"]').off(n).on(n,function(){d.find('[data-role="kid-age-item"]').removeClass(l.CLASS.classKidAgeSelected),t(this).addClass(l.CLASS.classKidAgeSelected),a.call(e,{text:t(this).text(),value:t(this).data("value")}),d.hide()}),d.show()},l.CLASS={classItem:"human-picker-item",classItemSelected:"human-picker-item-selected",classKidAgeSelected:"kid-age-item-selected"},l.i18n={ru:{tooltipItem:"Добавить",tooltipItemSelected:"Удалить",tooltipEditAge:"Редактировать возраст"},en:{tooltipItem:"Add",tooltipItemSelected:"Remove",tooltipEditAge:"Edit age"}},l.Tpl={Wrap:'<ul class="human-picker"></ul>',AdultItem:'<li class="'+l.CLASS.classItem+' human-picker-item-adult" data-role="adult-item"></li>',KidItem:'<li class="'+l.CLASS.classItem+' human-picker-item-kid" data-role="kid-item"><div class="kid-age-caption">{age}</div></li>',BodyListContainer:"<div id={id}></div>",AgeListWrap:'<div style="display: none;" class="human-picker_kid-age-list-wrap" data-role="kid-age-list"></div>',AgeList:'<ul class="kid-age-list"></ul>',AgeListItem:'<li class="kid-age-item" data-role="kid-age-item" data-value="{value}">{text}</li>',HiddenInput:'<input data-role="{role}" name="{name}" type="hidden" value="{value}">'},l.VERSION="1.0.0",l.DEFAULTS={adultsCount:4,kidsCount:3,initialValue:{adults:2,kids:0,kidsAges:[]},lang:"ru",adultsParamName:"adults",kidsParamName:"kids",kidsAgesParamName:"kidsAges[]",kidAgeItems:[{text:"0 лет",value:0},{text:"1 год",value:1},{text:"2 года",value:2},{text:"3 года",value:3},{text:"4 года",value:4},{text:"5 лет",value:5},{text:"6 лет",value:6},{text:"7 лет",value:7},{text:"8 лет",value:8},{text:"9 лет",value:9},{text:"10 лет",value:10},{text:"11 лет",value:11},{text:"12 лет",value:12},{text:"13 лет",value:13},{text:"14 лет",value:14},{text:"15 лет",value:15},{text:"16 лет",value:16},{text:"17 лет",value:17}],kidAgeItemsGroupMax:9},t.fn.HumanPicker=n,t.fn.HumanPicker.Constructor=l,t(i).on("load",function(){t('[data-control="humanpicker"]').each(function(){var e=t(this),i=e.data();n.call(e,i)})})}(jQuery,window,document)},{nano:1}]},{},[2]);