!function e(t,i,a){function n(d,l){if(!i[d]){if(!t[d]){var o="function"==typeof require&&require;if(!l&&o)return o(d,!0);if(s)return s(d,!0);var r=new Error("Cannot find module '"+d+"'");throw r.code="MODULE_NOT_FOUND",r}var p=i[d]={exports:{}};t[d][0].call(p.exports,function(e){var i=t[d][1][e];return n(i?i:e)},p,p.exports,e,t,i,a)}return i[d].exports}for(var s="function"==typeof require&&require,d=0;d<a.length;d++)n(a[d]);return n}({1:[function(e,t,i){(function(e){(function(e,t,i,a,n){function s(e,t){return e.replace(/\{([\w\.]*)\}/g,function(e,i){for(var a=i.split("."),n=t[a.shift()],s=0,d=a.length;d>s;s++)n=n[a[s]];return"undefined"!=typeof n&&null!==n?n:""})}n("undefined"!=typeof s?s:window.nano)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,i){!function(t,i,a,n){"use strict";function s(e){return this.each(function(){var i=t(this),a=i.data("xt.HumanPicker"),n="object"==typeof e&&e;a||i.data("xt.HumanPicker",a=new d(this,n)),"string"==typeof e&&a[e]()})}var d,l=e("nano");d=function(e,i){this.options=t.extend({},d.DEFAULTS,i),this.kidAgeItems=[];var n=d.i18n[this.options.lang].kidAges||[];this.kidAgeItems=t.map(n,function(e,t){return{text:e,value:t}}),this.$element=t(e),this.$bodyListContainer=this._renderTpl(d.Tpl.BodyListContainer,{id:this.$element.prop("id")+"_HumanPickerListContainer"}),this.$ageListWrap=this._renderTpl(d.Tpl.AgeListWrap),this.$ageListWrap.appendTo(this.$bodyListContainer),this.$bodyListContainer.appendTo(a.body),this._render(),this._bindEvents()},d.prototype._getI18n=function(e){return d.i18n[this.options.lang][e]},d.prototype.destroy=function(){this.$element.empty(),this.$bodyListContainer.empty(),this.$bodyListContainer.remove()},d.prototype._renderTpl=function(e,i){return t(l(e,i))},d.prototype._render=function(){var e,t=this,i=this._renderTpl(d.Tpl.Wrap),a=this.options,n=a.initialValue,s=n.kidsAges&&n.kidsAges instanceof Array?n.kidsAges:[];for(this.$element.empty(),e=0;e<a.adultsCount;e++)t._renderTpl(d.Tpl.AdultItem).addClass(e<n.adults?d.CLASS.classItemSelected:"").appendTo(i);for(t._renderTpl(d.Tpl.HiddenInput,{role:"adults",name:a.adultsParamName,value:n.adults}).appendTo(i),t._renderTpl(d.Tpl.HiddenInput,{role:"kids",name:a.kidsParamName,value:n.kids}).appendTo(i),e=0;e<a.adultsCount;e++)t._renderTpl(d.Tpl.KidItem,{age:s[e]||0}).append(t._renderTpl(d.Tpl.HiddenInput,{role:"kid-age",name:a.kidsAgesParamName,value:s[e]||0}).prop("disabled",e>=n.kids)).addClass(e<n.kids?d.CLASS.classItemSelected:"").appendTo(i);t.kidAgeItems.length>0&&t._renderKidAgeList(),t.$element.append(i),t._updateTooltips()},d.prototype._renderKidAgeList=function(){var e,t,i,a,n=this,s=this.options,l=s.kidAgeItemsGroupMax||9,o=Math.max(((n.kidAgeItems.length||1)/l).toFixed()-0,1);for(this.$ageListWrap.empty(),t=0;o>t;t++){for(e=n._renderTpl(d.Tpl.AgeList),a=Math.min(t*l+l,n.kidAgeItems.length),i=t*l;a>i;i++)n._renderTpl(d.Tpl.AgeListItem,n.kidAgeItems[i]).appendTo(e);e.appendTo(this.$ageListWrap)}},d.prototype.value=function(e){return e&&"object"==typeof e?void this._setValue(e):this._getValue()},d.prototype._setValue=function(e){},d.prototype._getValue=function(){var e={},i=this.$element.find('input[data-role="adults"]'),a=this.$element.find('input[data-role="kids"]'),n=this.$element.find("."+d.CLASS.classItemSelected+' input[data-role="kid-age"]');return e.adults=i.val(),e.kids=a.val(),e.kidsAges=e.kidsAges||[],n.length&&(e.kidsAges=t.map(n,function(e){return e.value-0})),e},d.prototype._updateTooltips=function(){var e=this,i=e.$element;i.find("."+d.CLASS.classItem).each(function(i,a){var n=t(a),s=n.hasClass(d.CLASS.classItemSelected)?"tooltipItemSelected":"tooltipItem";t(n).attr("title",e._getI18n(s))}),i.find(".kid-age-caption").each(function(i,a){var n=t(a);n.closest("."+d.CLASS.classItem).hasClass(d.CLASS.classItemSelected)?n.attr("title",e._getI18n("tooltipEditAge")):n.removeAttr("title")})},d.prototype._bindEvents=function(){var e=this,n=function(){e.$element.find('input[data-role="kids"]').val(e.$element.find('[data-role="kid-item"].'+d.CLASS.classItemSelected).length)};e.$element.find("[data-role='adult-item']").on("click",function(i){var a=e.$element.find('input[data-role="adults"]');t(this).toggleClass(d.CLASS.classItemSelected),a.val(e.$element.find('[data-role="adult-item"].'+d.CLASS.classItemSelected).length),e._updateTooltips()}),e.$element.find("[data-role='kid-item']").on("click",function(i){var a=t(this);e._kidAgePickerClose(),a.hasClass(d.CLASS.classItemSelected)?(a.removeClass(d.CLASS.classItemSelected),a.find(".kid-age-caption").text(0),a.find('input[data-role="kid-age"]').prop("disabled",!0).val(0),n(),e._updateTooltips()):a.find(".kid-age-caption").trigger("click")}),e.$element.find(".kid-age-caption").on("click",function(i){i.stopPropagation();var a=t(this),s=a.closest("[data-role='kid-item']"),l=s.find('input[data-role="kid-age"]').val()||0;e._kidAgePickerShow(s,l,function(t){a.text(t.text.replace(/ /g,"")),s.addClass(d.CLASS.classItemSelected),s.find('input[data-role="kid-age"]').prop("disabled",!1).val(t.value),n(),e._updateTooltips()})}),t(a).off("click.humanpicker.document").on("click.humanpicker.document",function(i){return t(i.target).closest('[data-role="kid-age-list"]').length||t(i.target).closest('[data-role="kid-item"]').length?void i.preventDefault():void e._kidAgePickerClose()}),t(i).off("resize.humanpicker.window").on("resize.humanpicker.window",function(t){e._kidAgePickerClose()})},d.prototype._kidAgePickerClose=function(){var e=this.$ageListWrap;e.hide()},d.prototype._kidAgePickerShow=function(e,i,a){var n="click.humanpicker",s=this.$ageListWrap;s.css("left",t(e).offset().left),s.css("top",t(e).offset().top+t(e).outerHeight()+2),s.find('[data-role="kid-age-item"]').removeClass(d.CLASS.classKidAgeSelected),s.find('[data-role="kid-age-item"][data-value="'+i+'"]').addClass(d.CLASS.classKidAgeSelected),s.find('[data-role="kid-age-item"]').off(n).on(n,function(i){s.find('[data-role="kid-age-item"]').removeClass(d.CLASS.classKidAgeSelected),t(this).addClass(d.CLASS.classKidAgeSelected),a.call(e,{text:t(this).text(),value:t(this).data("value")}),s.hide()}),s.show()},d.CLASS={classItem:"human-picker-item",classItemSelected:"human-picker-item-selected",classKidAgeSelected:"kid-age-item-selected"},d.i18n={ru:{tooltipItem:"Добавить",tooltipItemSelected:"Удалить",tooltipEditAge:"Редактировать возраст",kidAges:["0 лет","1 год","2 года","3 года","4 года","5 лет","6 лет","7 лет","8 лет","9 лет","10 лет","11 лет","12 лет","13 лет","14 лет","15 лет","16 лет","17 лет"]},en:{tooltipItem:"Add",tooltipItemSelected:"Remove",tooltipEditAge:"Edit age",kidAges:["0 years","1 year","2 years","3 years","4 years","5 years","6 years","7 years","8 years","9 years","10 years","11 years","12 years","13 years","14 years","15 years","16 years","17 years"]}},d.Tpl={Wrap:'<ul class="human-picker"></ul>',AdultItem:'<li class="'+d.CLASS.classItem+' human-picker-item-adult" data-role="adult-item"></li>',KidItem:'<li class="'+d.CLASS.classItem+' human-picker-item-kid" data-role="kid-item"><div class="kid-age-caption">{age}</div></li>',BodyListContainer:"<div id={id}></div>",AgeListWrap:'<div style="display: none;" class="human-picker_kid-age-list-wrap" data-role="kid-age-list"></div>',AgeList:'<ul class="kid-age-list"></ul>',AgeListItem:'<li class="kid-age-item" data-role="kid-age-item" data-value="{value}">{text}</li>',HiddenInput:'<input data-role="{role}" name="{name}" type="hidden" value="{value}">'},d.VERSION="1.0.0",d.DEFAULTS={adultsCount:4,kidsCount:3,initialValue:{adults:2,kids:0,kidsAges:[]},lang:"en",adultsParamName:"adults",kidsParamName:"kids",kidsAgesParamName:"kidsAges[]",kidAgeItemsGroupMax:9},t.fn.HumanPicker=s,t.fn.HumanPicker.Constructor=d,t(i).on("load",function(){t('[data-control="humanpicker"]').each(function(){var e=t(this),i=e.data();s.call(e,i)})})}(jQuery,window,document)},{nano:1}]},{},[2]);
//# sourceMappingURL=jquery.humanpicker.min.js.map
